<div class="flex flex-col gap-0.5 w-96">
  <label class="pl-1 text-sm" [for]="data().label">{{ data().label }}:</label>
  <div class="flex gap-1 w-full relative">
    <input
      [id]="data().label"
      class="read-only:bg-(--p-surface-900) bg-(--p-surface-500) rounded p-2 pl-3 pr-19 border flex-1 items-center w-full h-9"
      [(ngModel)]="inputValue"
      [readonly]="!editMode()"
      (pointerdown)="onClickInput()"
      (blur)="onBlur($event)"
      [type]="data().type"
      [attr.data-testid]="'editable-input-' + data().key"
    />
    @if (editMode()) {
    <div
      class="absolute flex align-center gap-2 pointer-events-none right-2 top-1/2 -translate-y-1/2"
    >
      <button
        (pointerdown)="onSave()"
        class="pointer-events-auto rounded-full bg-green-600 w-7 h-7 flex justify-center items-center hover:bg-green-900 hover:cursor-pointer"
        type="button"
        aria-label="Save field value"
        [attr.data-testid]="'editable-save-' + data().key"
      >
        <svg width="12" height="12" viewBox="0 0 16 16" fill="none">
          <path d="M3 8l3 3 7-7" stroke="currentColor" stroke-width="2" fill="none" />
        </svg>
      </button>
      <button
        (pointerdown)="onClose()"
        class="pointer-events-auto rounded-full bg-red-600 w-7 h-7 flex justify-center items-center hover:bg-red-900 hover:cursor-pointer"
        type="button"
        aria-label="Discard field changes"
        [attr.data-testid]="'editable-cancel-' + data().key"
      >
        <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
          <path d="M2 2l12 12M14 2L2 14" stroke="currentColor" stroke-width="2" />
        </svg>
      </button>
    </div>
    }
  </div>
</div>
